import React, { Component } from 'react';import ReactDOM from 'react-dom';let css = {	title:{	  borderLeft:'5px solid #5aa7fd',      paddingLeft:'10px',      marginBottom:'20px'	},	Group:{		display:'flex',        flexDirection:'row',        flexWrap:'nowrap',        justifyContent:'flex-end '	},	item:{		display:'flex',        flexDirection:'row',        flexWrap:'nowrap',        marginBottom:'10px',               lineHeight:'30px',        padding:'0 10px',         justifyContent:'space-between' 	},	name:{		flex:1	},	time:{		width:'100px',		padding:'0 0px 0 20px ',		display:'inline-block',		textAlign:'right'	},	listul:{		marginBottom:'50px'	},	lv1:{		background:'#cffdbb',	},	lv2:{		background:'#fde8bb',	},	lv3:{		background:'#ffb2b2',	}}class Item extends React.Component{    constructor(props) {        super(props);    }    render() {        return (                    <li style={css.item} className={(this.props.avgtime<500)?'lv1':(this.props.avgtime<1000)?'lv2':'lv3'}>                        <div  style={css.name}>{this.props._id}</div>                        <span style={css.time}>{Math.floor(this.props.avgtime)}ms</span>                    </li>        )    }}class Performance extends React.Component {	constructor(props) {        super(props);        this.state = {            performanceData:{js:[],css:[],xhr:[]}        };        this.getData = this.getData.bind(this);        this.getData(this.props.day,this.props.url);    }     getData(day,url){         var that = this,_url=url;        if(url == undefined){            _url = ''        }        fetch('/api/getPerformance?day='+day+'&project='+this.props.project+'&url='+_url, {            method: 'GET',            headers: {                'Accept': 'application/json',                'Content-Type': 'application/json',            }        }).then(response => response.json()).then(function(response){            if(response.code==1){                that.setState({                    performanceData:response.reslut                })            }else{                alert(response.msg)            }        });    }    componentWillReceiveProps(nextProps) {       this.getData(nextProps.day,nextProps.url);    }     render() {        // let _css = this.state.performanceData.css.map((item,i) => {        //      <Item _id={item.item} avgtime={item.avgtime}  key={i} _key={i}/>        // })        let _css = this.state.performanceData.css.map(function(item,i){            return  <Item _id={item._id} avgtime={item.avgtime}  key={i} _key={i}/>        })        let _js = this.state.performanceData.js.map(function(item,i){            return  <Item _id={item._id} avgtime={item.avgtime}  key={i} _key={i}/>        })        let _xhr = this.state.performanceData.xhr.map(function(item,i){            return  <Item _id={item._id} avgtime={item.avgtime}  key={i} _key={i}/>        })        if(_css.length==0){            _css = <div>暂无数据</div>        }         if(_js.length==0){            _js = <div>暂无数据</div>        }         if(_xhr.length==0){            _xhr = <div>暂无数据</div>        }     	return (     		<div style={css.Performance} className='Performance'>     			<div style={css.Group}>	     			<antd.Radio.Group defaultValue="a" buttonStyle="solid" size="small">				        <antd.Radio.Button value="a">当天平均数据</antd.Radio.Button>				        <antd.Radio.Button value="b">最新15分钟内数据</antd.Radio.Button>				      </antd.Radio.Group>			     </div>     			<div style={css.title}>     				CSS:     			</div>     			<ul style={css.listul}>     				{_css}     			</ul>     			<div style={css.title}>     				JS:     			</div>     			<ul style={css.listul}>     				{_js}     			</ul>     			<div style={css.title}>     				XHR:     			</div>     			<ul style={css.listul}>     				{_xhr}     			</ul>     		</div>     	)     }}module.exports = Performance;