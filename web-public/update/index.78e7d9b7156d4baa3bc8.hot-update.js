webpackHotUpdateMyDoc("index",{

/***/ "./src/components/errorPage/index.js":
/*!*******************************************!*\
  !*** ./src/components/errorPage/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(/*! react-dom */ \"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar css = {\n    title: {\n        fontSize: '20px',\n        marginBottom: '20px'\n    }\n};\n\nvar ErrorPage = function (_React$Component) {\n    _inherits(ErrorPage, _React$Component);\n\n    function ErrorPage(props) {\n        _classCallCheck(this, ErrorPage);\n\n        var _this = _possibleConstructorReturn(this, (ErrorPage.__proto__ || Object.getPrototypeOf(ErrorPage)).call(this, props));\n\n        _this.state = {\n            showLoading: true,\n            data: {\n                backgroundColor: '#153f5a',\n\n                title: {\n                    // text: 'Customized Pie',\n                    left: 'center',\n                    top: 20,\n                    textStyle: {\n                        color: '#ccc'\n                    }\n                },\n\n                tooltip: {\n                    trigger: 'item',\n                    formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n                },\n\n                visualMap: {\n                    show: false,\n                    min: 80,\n                    max: 600,\n                    inRange: {\n                        colorLightness: [0, 1]\n                    }\n                },\n                series: [{\n                    name: '页面',\n                    type: 'pie',\n                    radius: ['40%', '60%'],\n                    center: ['50%', '50%'],\n                    data: [{ value: 335, name: '直接访问' }, { value: 310, name: '邮件营销' }, { value: 274, name: '联盟广告' }, { value: 235, name: '视频广告' }, { value: 400, name: '搜索引擎' }].sort(function (a, b) {\n                        return a.value - b.value;\n                    }),\n                    // roseType: 'radius',\n                    label: {\n                        normal: {\n                            textStyle: {\n                                color: 'rgba(255, 255, 255, 0.8)'\n                            }\n                        }\n                    },\n                    labelLine: {\n                        normal: {\n                            lineStyle: {\n                                color: 'rgba(255, 255, 255, 0.3)'\n                            },\n                            smooth: 0.2,\n                            length: 10,\n                            length2: 20\n                        }\n                    },\n                    // itemStyle: {\n                    //     normal: {\n                    //         color: '#c23531',\n                    //         shadowBlur: 200,\n                    //         shadowColor: 'rgba(0, 0, 0, 0.5)'\n                    //     }\n                    // },\n\n                    animationType: 'scale',\n                    animationEasing: 'elasticOut',\n                    animationDelay: function animationDelay(idx) {\n                        return Math.random() * 200;\n                    }\n                }]\n            }\n        };\n\n        _this.showChart = _this.showChart.bind(_this);\n        _this.getData = _this.getData.bind(_this);\n\n        _this.getData(_this.props.day, _this.props.url);\n        return _this;\n    }\n\n    _createClass(ErrorPage, [{\n        key: 'getData',\n        value: function getData(day, url) {\n\n            var that = this,\n                _url = url;\n            if (url == undefined) {\n                _url = '';\n            }\n            fetch('/api/getErrorDistributed?day=' + day + '&project=' + this.props.project, {\n                method: 'GET',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            }).then(function (response) {\n                return response.json();\n            }).then(function (response) {\n                if (response.code == 1) {\n                    var ChartData = [],\n                        data = Object.assign({}, that.state.data);\n                    response.reslut.map(function (item, index) {\n                        ChartData.push({ value: item.num, name: item.list[0], url: item._id });\n                    });\n                    data.series[0].data = ChartData.sort(function (a, b) {\n                        return a.value - b.value;\n                    });\n                    that.setState({\n                        data: data,\n                        showLoading: false\n                    }, function () {\n                        that.showChart();\n                    });\n                } else {\n                    alert(response.msg);\n                }\n            });\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            this.getData(nextProps.day, nextProps.url);\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            //this.showChart();\n            var that = this;\n        }\n        // componentDidUpdate() {\n        //     this.showChart();\n        // }\n\n    }, {\n        key: 'showChart',\n        value: function showChart() {\n            var that = this;\n            document.getElementById('ErrorPage').innerHTML = '';\n            document.getElementById('ErrorPage').removeAttribute('_echarts_instance_');\n            setTimeout(function () {\n                var myChart = echarts.init(document.getElementById('ErrorPage'));\n                // 指定图表的配置项和数据\n                // 使用刚指定的配置项和数据显示图表。\n                myChart.setOption(that.state.data);\n                myChart.on('click', function (e) {\n                    //console.log(e.data)\n                    window.open('/pagecontent?day=' + that.props.day + '&project=' + that.props.project + '&url=' + e.data.url + '&title=' + e.data.name);\n                    // location.href = '/pagecontent?day='+that.props.day+'&project='+that.props.project+'&url='+e.data.url+'&title='+e.data.name\n                });\n            }, 300);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var main = this.state.showLoading ? _react2.default.createElement(\n                'div',\n                { style: { width: 500, height: 400, lineHeight: '400px', textAlign: 'center' } },\n                _react2.default.createElement(antd.Spin, null)\n            ) : _react2.default.createElement('div', { id: 'ErrorPage', style: { width: 500, height: 400, backgroundColor: '#153f5a' } });\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'div',\n                    { style: css.title },\n                    '\\u9519\\u8BEF\\u9875\\u9762\\u5206\\u5E03'\n                ),\n                main\n            );\n        }\n    }]);\n\n    return ErrorPage;\n}(_react2.default.Component);\n\nmodule.exports = ErrorPage;\n\n//# sourceURL=webpack://MyDoc/./src/components/errorPage/index.js?");

/***/ })

})